#include<stdio.h>
#include<stdlib.h>
struct info
{
        char name[20];
        char num[20];
        char sex;
        int chinese;
        int math;
        int english;
        float average;
        struct info * next;
};
void create(struct info **);
void print(struct info *);
void ruber(struct info**);
int main()
{
        int n;
        struct info * head;
        head=NULL;
        printf("学生管理系统\n1.创建链表\n2.删除链表\n3.打印链表\n4.插入数据\n5.删除数据\n6.计算平均成绩\n7.按平均成绩排序\n8.退出系统\n请选择操作序号:");
        while(EOF!=scanf("%d",&n))
        {
                switch(n)
                {
                        case 1: create(&head);
                                printf("请选择操作序号:");
                                continue;
                        case 2: ruber(&head);
                                printf("请选择操作序号:");
                                continue;
                        case 3: print(head);
                                printf("请选择操作序号:");
                                continue;
                        default: break;
                }
                break;
        }
        return 0;
}
void create(struct info **headp)
{
        struct info * loc_head=NULL,*tail;
        loc_head=(struct info *)malloc(sizeof(struct info));
        printf("请输入学生姓名(拼音):");
        getchar();
        gets(loc_head->name);
        tail=loc_head;
        while(*(tail->name))
        {
                printf("学号:");
                gets(tail->num);
                printf("性别(m/w):");
                tail->sex=getchar();
                printf("语文:");
                scanf("%d",&tail->chinese);
                printf("数学:");
                scanf("%d",&tail->math);
                printf("英语:");
                scanf("%d",&tail->english);
                tail->next=(struct info *)malloc(sizeof(struct info));
                tail=tail->next;
                printf("请输入学生姓名或按回车键结束:");
                getchar();
                gets(tail->name);
        }
        *headp=loc_head;
}
void print(struct info *head)
{
        struct info * p=head;
        if(p==NULL){
                printf("暂无链表数据\n");return;}
        while(*(p->name))
        {
                printf("姓名             学号         性别  语文 数学 英语\n");
                printf("%-15s  %-10s   %c     %d    %d    %d\n",
                p->name,p->num,p->sex,p->chinese,p->math,p->english);
                p=p->next;
        }
}
void ruber(struct info **headp)
{
        free(*headp);
        *headp=NULL;
        printf("成功删除链表\n");
}
